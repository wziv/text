<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <meta name="keywords" content="fesco运营业务系统">
    <meta name="description" content="fesco运营业务系统">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <title>fesco运营业务系统</title>
    <link rel="stylesheet" type="text/css" href="css/myStyle.css">
    <link rel="stylesheet" type="text/css" href="css/base.css">
    <style>
        .box {
            width: 1100px;
            padding: 20px;
            box-shadow: 1px 1px 3px rgba(0, 0, 0, .2);
            margin: 30px;
            border-radius: 5px;
            background: #fff;
        }
    </style>
</head>

<body style="background: #f4f4f4;">
    <div id="app" v-cloak class="box" v-if="flag">
        <table class="my_Table">
            <thead>
                <tr>
                    <th colspan="2">商品</th>
                    <th>价格(元)/数量</th>
                    <th>售后</th>
                    <th>买家/收货人</th>
                    <th>策划/积分类型</th>
                    <th>支付费用(点/元)</th>
                    <th>订单状态</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody v-for="item in orderList" :key="item.id">
                <tr class="my_sepRow">
                    <td colspan="9"></td>
                </tr>

                <!-- 无分单 -->

                <!-- 订单标题 -->
                <tr class="my_order" v-if="item.subDansNum === 0">
                    <td colspan="9" class="my_orderTit">
                        <span class="my_table_span1">订单号：</span>
                        <span class="my_table_span2">{{item.danno}}</span>
                        <span class="my_table_span1">下单时间: </span>
                        <span class="my_table_span2">{{item.dandate}}</span>
                    </td>
                </tr>

                <!-- 订单内容 -->
                <tr class="my_orderDetali border2" v-if="item.subDansNum === 0">
                    <td>
                        <img :src="item.dantails.thumbnail" alt="" class="my_orderImg">
                    </td>
                    <td>
                        <a href="#" class="my_goodsName">{{item.dantails[0].aliasname}}</a>
                        <p class="my_goodsNorms">1m 一体成型线</p>
                    </td>
                    <td>
                        <p class="my_table-p">{{item.dantails.price}}</p>
                        <p class="my_table-p">{{item.dantails.nums}}件</p>
                    </td>
                    <td>
                        <p class="my_table-p">已全额退款</p>
                    </td>
                    <td>
                        <a href="#" class="my_table-a">小明</a>
                        <p class="my_table-p">赵泽明</p>
                        <p class="my_table-p">13716182664</p>
                    </td>
                    <td>
                        <p class="my_table-p">商城</p>
                        <p class="my_table-p">(商城积分)</p>
                    </td>
                    <td>
                        <p class="my_table-p">支付金额 100.00元</p>
                        <p class="my_table-p">商城积分 100.00点</p>
                    </td>
                    <td>
                        <p class="my_table-a">已退款</p>
                    </td>
                    <td>
                        <input type="button" class="my_orderDetailBtn" value="详情">
                    </td>
                </tr>

                <!-- 有分单 -->

                <!-- 主订单标题 -->
                <tr class="my_mainOrderTitTr" v-if="item.subDansNum !== 0">
                    <td colspan="9" class="my_mainOrderTit">
                        <span class="my_table_span1">主订单：</span>
                        <span class="my_table_span2">{{item.danno}}</span>
                    </td>
                </tr>

                <tr class="border1" v-if="item.subDansNum !== 0">
                    <td colspan="9">
                        <table v-for="subItem in item.subs" :key="subItem.id" class="table1">
                            <!-- 子订单标题 -->
                            <tr class="my_subOrderTitTr">
                                <td colspan="9" class="my_subOrderTit">
                                    <span class="my_table_span1">订单号：</span>
                                    <span class="my_table_span2">{{subItem.danno}}</span>
                                    <span class="my_table_span1">下单时间: </span>
                                    <span class="my_table_span2">{{subItem.dandate}}</span>
                                </td>
                            </tr>
                            <!-- 子订单内容 -->
                            <tr class="my_orderDetali">
                                <td>
                                    <img :src="subItem.dantails.thumbnail" alt="" class="my_orderImg">
                                </td>
                                <td>
                                    <a href="#" class="my_goodsName">{{subItem.dantails[0].hname}}</a>
                                    <p class="my_goodsNorms">1m 一体成型线</p>
                                </td>
                                <td>
                                    <p class="my_table-p">{{subItem.dantails.price}}</p>
                                    <p class="my_table-p">{{subItem.dantails.nums}}件</p>
                                </td>
                                <td>
                                    <p class="my_table-p">已全额退款</p>
                                </td>
                                <td>
                                    <a href="#" class="my_table-a">小明</a>
                                    <p class="my_table-p">赵泽明</p>
                                    <p class="my_table-p">13716182664</p>
                                </td>
                                <td>
                                    <p class="my_table-p">商城</p>
                                    <p class="my_table-p">(商城积分)</p>
                                </td>
                                <td>
                                    <p class="my_table-p">支付金额 100.00元</p>
                                    <p class="my_table-p">商城积分 100.00点</p>
                                </td>
                                <td>
                                    <p class="my_table-a">已退款</p>
                                </td>
                                <td>
                                    <input type="button" class="my_orderDetailBtn" value="详情">
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>

            </tbody>
            
        </table>

    </div>
    <script src="./js/vue-2.2.4.js"></script>
    <script src="./js/common.js"></script>
    <script src="./js/axios.min.js"></script>
    <script type="text/javascript">
        var app = new Vue({
            el: '#app',
            data: {
                flag: false,
                orderList: []
            },
            methods: {
                getDataAxios() {
                    var _this = this;
                    axios.get('http://49.233.162.122:7300/mock/5ef5d88c125ea52e9f7ece81/order/list', { // 还可以直接把参数拼接在url后边
                        
                    }).then(function (res) {
                        console.log(res.data);
                        _this.flag = true;
                        _this.orderList = res.data.Data;
                        console.log(_this.orderList)
                        // if (res.data.data.jg === true) {
                        //     // 存储token
                        //     localStorage.setItem("token", res.data.data.token);
                        //     window.location.href = './personalSet.html';
                        //     // console.log(localStorage.getItem("token"))
                        // } else {
                        //     _this.flag = true111111111111111111
                        // }
                    }).catch(function (error) {
                        console.log(error)
                    });
                }
            },
            created() {
                this.getDataAxios() 
            }
        })
    </script>
</body>

</html>